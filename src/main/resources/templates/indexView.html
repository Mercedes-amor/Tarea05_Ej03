<!DOCTYPE html>
<html xmlns="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mercedes Amor Ejercicio 5.3</title>
    <link href="/webjars/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <script src="/webjars/bootstrap/js/bootstrap.bundle.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="principalContainer">
      <h1>Elige tu película favorita</h1>

      <form action="#" method="post" th:action="@{/}" th:object="${formInfo}">
        <div class="formContainer">
          <div class="container">
            <input
              type="radio"
              id="peli1"
              name="voto"
              value="peli1"
              th:field="*{voto}"
            />
            <label for="peli1">Película 1</label>
            <img
              src="images/gladiator.jpg"
              alt="Gladiator"
              style="width: 200px"
            />
            <i class="bi bi-heart"></i>
            <span th:text="${votosFoto1}">0</span>
            <br />
          </div>
          <div class="container">
            <input
              type="radio"
              id="peli2"
              name="voto"
              value="peli2"
              th:field="*{voto}"
            />
            <label for="peli1">Película 2</label>
            <img src="images/matrix.jpg" alt="Matrix" style="width: 200px" />
            <i class="bi bi-heart"></i>
            <span th:text="${votosFoto2}">0</span>
            <br />
          </div>
          <div class="container">
            <input
              type="radio"
              id="peli3"
              name="voto"
              value="peli3"
              th:field="*{voto}"
            />
            <label for="peli1">Película 3</label>
            <img
              src="images/pirates.jpg"
              alt="Piratas del Caribe"
              style="width: 200px"
            />
            <i class="bi bi-heart"></i>
            <span th:text="${votosFoto3}">0</span>
            <br />
          </div>
        </div>
        <!-- Mensaje de error -->
        <span
          th:if="${#fields.hasErrors('voto')}"
          th:errors="*{voto}"
          style="color: red"
        ></span>

        <div class="emailContainer">
          <p>Introduce tu email para poder votar</p>
          <label for="email">Email</label>
          <input type="email" id="email" name="email" th:field="*{email}" />
          <!-- Mensaje de error campo email vacío-->
          <span
            th:if="${#fields.hasErrors('email')}"
            th:errors="*{email}"
            style="color: red"
          ></span>
         
          <!-- Mensaje de error email duplicado-->
          <span th:if="${error}" class="error" style="color: red">
            <p th:text="${error}"></p>
          </span>
        </div>
        <div class="buttonContainer">
          <!-- Botón enviar -->
          <button type="submit">Votar</button>
        </div>
                  <!-- Mensaje voto registrado -->
                  <span th:if="${votoOk}" style="color: rgb(17, 92, 10)">
                    <p th:text="${votoOk}"></p>
                  </span>
      </form>
    </div>
  </body>
</html>
